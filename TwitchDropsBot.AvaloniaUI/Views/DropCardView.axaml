<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:TwitchDropsBot.AvaloniaUI.ViewModels"
             xmlns:lottie="clr-namespace:Avalonia.Labs.Lottie;assembly=Avalonia.Labs.Lottie"
             xmlns:asyncImageLoader="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
             x:Class="TwitchDropsBot.AvaloniaUI.Views.DropCardView"
             x:DataType="vm:TabUserViewModel"
             Width="300" Height="100">
    <Border Margin="4" Padding="0" Background="Transparent" CornerRadius="8">
			<Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Grid Grid.Column="0" Width="100" Height="100">
                    <lottie:Lottie Path="/Assets/watching.json"
                                   VerticalAlignment="Center"
                                   Height="170"
                                   Width="170"
                    />
                    <ProgressBar Width="100" Height="100" Value="{Binding Progress}" Theme="{DynamicResource ProgressRing}"/>

                    <Image asyncImageLoader:ImageLoader.Source="{Binding DropImage}"
                           Width="70" Height="70"
                           VerticalAlignment="Center" HorizontalAlignment="Center"
                           Stretch="UniformToFill">
                        <Image.Clip>
                            <EllipseGeometry Center="35,35" RadiusX="35" RadiusY="35"/>
                        </Image.Clip>
                    </Image>
                </Grid>
                
                <Grid Grid.Column="2" Height="100">
                    <Image asyncImageLoader:ImageLoader.Source="{Binding GameImage}"
                           HorizontalAlignment="Stretch"
                           VerticalAlignment="Stretch"
                           Stretch="UniformToFill"
                           Opacity="0.8">
                        <Image.OpacityMask>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="100,0">
                                <GradientStop Color="#00FFFFFF" Offset="0.10"/>
                                <GradientStop Color="#FFFFFFFF" Offset="1"/>
                            </LinearGradientBrush>
                        </Image.OpacityMask>
                    </Image>
                    <StackPanel Orientation="Vertical" VerticalAlignment="Center" Margin="8,0">
                        <TextBlock TextWrapping="Wrap" Text="{Binding Drop}" FontWeight="Bold" FontSize="16"/>
                        <TextBlock Text="{Binding Percentage}" FontSize="14"/>
                    </StackPanel>
                    
                </Grid>
            </Grid>
    </Border>
</UserControl>